require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_reactFormstate=require("react-formstate"),_reactBootstrap=require("react-bootstrap"),_RfsInput2=_interopRequireDefault(require("./RfsInput.jsx"));require("react-formstate-validation").validationAdapter.plugInto(_reactFormstate.FormState);var ChangePasswordForm=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.formState=new _reactFormstate.FormState(r),r.state={},r.handleSubmit=r.handleSubmit.bind(r),r.validateConfirmNewPassword=r.validateConfirmNewPassword.bind(r),r.handlePasswordChange=r.handlePasswordChange.bind(r),r}return _inherits(t,_react.Component),_createClass(t,[{key:"validateConfirmNewPassword",value:function(e,t){if(e!==t.get("newPassword"))return"Password confirmation does not match"}},{key:"render",value:function(){return _react2.default.createElement(_reactFormstate.Form,{formState:this.formState,onSubmit:this.handleSubmit},_react2.default.createElement(_reactBootstrap.Grid,{fluid:!0},_react2.default.createElement(_reactBootstrap.Row,null,_react2.default.createElement(_reactBootstrap.Col,{xs:12,sm:6,lg:4},_react2.default.createElement(_RfsInput2.default,{formField:"newPassword",type:"password",label:"New Password",required:!0,fsv:function(e){return e.regex(/^\S+$/).msg("Password must not contain whitespace").minLength(8).msg("Password must be at least 8 characters")},handleValueChange:this.handlePasswordChange})),_react2.default.createElement(_reactBootstrap.Col,{xs:12,sm:6,lg:4},_react2.default.createElement(_RfsInput2.default,{formField:"confirmNewPassword",type:"password",label:"Confirm New Password",required:!0,validate:this.validateConfirmNewPassword})),_react2.default.createElement(_reactBootstrap.Col,{xsHidden:!0,lg:4})),_react2.default.createElement(_reactBootstrap.Row,null,_react2.default.createElement(_reactBootstrap.Col,{xs:12},_react2.default.createElement("input",{type:"submit",value:"Submit",disabled:this.formState.isInvalid()})))))}},{key:"handlePasswordChange",value:function(e){var t=this.formState.createUnitOfWork();t.set("newPassword",e).validate(),t.set("confirmNewPassword",""),t.updateFormState()}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.formState.createUnitOfWork().createModel();t&&alert(JSON.stringify(t))}}]),t}();exports.default=ChangePasswordForm},{"./RfsInput.jsx":3,react:"react","react-bootstrap":"react-bootstrap","react-formstate":7,"react-formstate-validation":6}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _react2=function(e){return e&&e.__esModule?e:{default:e}}(require("react")),_reactBootstrap=require("react-bootstrap");exports.default=function(e){var t=e.props;return _react2.default.createElement(_reactBootstrap.FormGroup,{className:t.className,controlId:t.controlId,validationState:t.validationState},_react2.default.createElement(_reactBootstrap.ControlLabel,null,t.label),_react2.default.createElement(_reactBootstrap.FormControl,{type:t.type||"text",value:t.value,placeholder:t.placeholder,onChange:function(e){return t.handleValueChange(e.target.value)},disabled:t.disabled,autoFocus:t.autoFocus,autoComplete:t.autoComplete}),_react2.default.createElement(_reactBootstrap.FormControl.Feedback,null),_react2.default.createElement(_reactBootstrap.HelpBlock,null,t.help))}},{react:"react","react-bootstrap":"react-bootstrap"}],3:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_react2=_interopRequireDefault(require("react")),_Input2=_interopRequireDefault(require("./Input.jsx"));exports.default=function(e){var t=e.className,a=e.required,r=e.fieldState,n=e.handleValueChange,i=(e.showValidationMessage,e.formState,_objectWithoutProperties(e,["className","required","fieldState","handleValueChange","showValidationMessage","formState"])),u=null;return r.isValid()&&(u=r.get("warn")?"warning":"success"),r.isValidating()&&(u="warning"),r.isInvalid()&&(u="error"),_react2.default.createElement(_Input2.default,_extends({className:(t||"")+" "+(a?"required":""),controlId:r.getKey(),validationState:u,value:r.getValue(),handleValueChange:n,help:r.getMessage()},i))}},{"./Input.jsx":2,react:"react"}],4:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _react2=_interopRequireDefault(require("react")),_reactDom2=_interopRequireDefault(require("react-dom")),_DemoForm2=_interopRequireDefault(require("./components/DemoForm.jsx"));_reactDom2.default.render(_react2.default.createElement(_DemoForm2.default,null),document.getElementById("react-mount-point"))},{"./components/DemoForm.jsx":1,react:"react","react-dom":"react-dom"}],5:[function(require,module,exports){module.exports={email:"%1 must be an email address",equals:"%1 must equal %2",greaterThan:"%1 must be greater than %2",integer:"%1 must be an integer",length:"%1 must have length equal to %2",lessThan:"%1 must be less than %2",max:"%1 must be at most %2",maxLength:"%1 must have a maximum length of %2",min:"%1 must be at least %2",minLength:"%1 must have a minimum length of %2",number:"%1 must be a number",numeric:"%1 must only contain numbers",required:"%1 is required",startsWith:"%1 must start with %2",url:"%1 must be a url"}},{}],6:[function(require,module,exports){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.validationAdapter=exports.FormStateAdapter=exports.aliases=exports.content=exports.library=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_default2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./content/en-us/default.js")),library=exports.library={email:function(value){return library.regex(value,/^\S+@\S+\.\S+$/)},equals:function(value,baseline){return value===baseline},exists:function(value){return void 0!==value&&null!==value},greaterThan:function(value,baseline){return library.required(value)&&Number(value)>baseline},integer:function(value){return library.regex(value,/^-?[0-9]+$/)},length:function(value,len){return library.exists(value)&&library.exists(value.length)&&value.length===len},lessThan:function(value,baseline){return library.required(value)&&Number(value)<baseline},max:function(value,baseline){return library.required(value)&&Number(value)<=baseline},maxLength:function(value,len){return library.exists(value)&&library.exists(value.length)&&value.length<=len},min:function(value,baseline){return library.required(value)&&Number(value)>=baseline},minLength:function(value,len){return library.exists(value)&&library.exists(value.length)&&value.length>=len},number:function(value){return library.required(value)&&!Number.isNaN(Number(value))},numeric:function(value){return library.regex(value,/^[0-9]+$/)},regex:function(value,pattern){return library.required(value)&&pattern.test(value)},required:function(value){return"string"==typeof value&&""!==value.trim()},startsWith:function(value,searchString){return library.required(value)&&library.exists(searchString)&&value.substr(0,searchString.length)===searchString},url:function(value){if(null===value||"string"==typeof value&&""===value.trim())return!0;var re_weburl=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");return library.regex(value,re_weburl)}};exports.content=_default2.default;var aliases=exports.aliases=[{name:"equals",alias:"eq"},{name:"greaterThan",alias:"gt"},{name:"integer",alias:"int"},{name:"length",alias:"len"},{name:"lessThan",alias:"lt"},{name:"max",alias:"lte"},{name:"maxLength",alias:"maxlen"},{name:"maxLength",alias:"xlen"},{name:"min",alias:"gte"},{name:"minLength",alias:"minlen"},{name:"minLength",alias:"nlen"}],FormStateAdapter=exports.FormStateAdapter=function(){function FormStateAdapter(validationLibrary,messageContent,aliases){_classCallCheck(this,FormStateAdapter),this.validationLibrary=validationLibrary,this.messageContent=messageContent,this.aliases=aliases}return _createClass(FormStateAdapter,[{key:"plugInto",value:function(FormState){this.validationLibrary.required&&FormState.setRequired(this.createFormStateValidationFunction("required"));for(var names=Object.keys(this.validationLibrary),i=0,len=names.length;i<len;i++){var name=names[i];FormState.registerValidation(name,this.createFormStateValidationFunction(name))}if(this.aliases&&this.aliases.length)for(var _i=0,_len=this.aliases.length;_i<_len;_i++){var alias=aliases[_i];FormState.registerValidation(alias.alias,this.createFormStateValidationFunction(alias.name))}}},{key:"createFormStateValidationFunction",value:function(name){return function(){var args=[].slice.call(arguments);if(!this.validationLibrary[name].apply(void 0,[args[0]].concat(_toConsumableArray(args.slice(2)))))return this.interpolateMessage(name,args.slice(1))}.bind(this)}},{key:"interpolateMessage",value:function(name,args){var message=this.messageContent&&this.messageContent[name];if(!message)return args[0]+" is invalid";for(var i=0,len=args.length;i<len;i++)message=message.split("%"+(i+1)).join(""+args[i]);return message}}]),FormStateAdapter}();exports.validationAdapter=new FormStateAdapter(library,_default2.default,aliases)},{"./content/en-us/default.js":5}],7:[function(require,module,exports){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function prefix(path,name){return void 0===name?FORM_STATE_PREFIX+path:path?path+"."+name:name}function _getFieldState(state,key){return state[prefix(key)]}function _setFieldState(state,key,_fieldState){state[prefix(key)]=_fieldState}function exists(v){return void 0!==v&&null!==v}function findField(rootFields,key,readOnly){for(var fields=rootFields,fieldnames=key.split("."),len=fieldnames.length,i=0;i<len-1;i++){var _ret=function(i){var objectField=fields.find(function(x){return x.name===fieldnames[i]});if(!objectField){if(readOnly)return{v:null};objectField={key:fieldnames.slice(0,i+1).join("."),name:fieldnames[i],fields:[],initialized:!1},fields.push(objectField)}fields=objectField.fields||objectField.array}(i);if("object"===(void 0===_ret?"undefined":_typeof(_ret)))return _ret.v}var field=fields.find(function(x){return x.name===fieldnames[len-1]});if(!field){if(readOnly)return null;field={key:key,name:fieldnames[len-1],initialized:!1},fields.push(field)}return field}function findFieldByFieldOrName(formState,fieldOrName){return exists(fieldOrName.name)?fieldOrName:findField(formState.getRootFields(),formState.buildKey(fieldOrName),!0)}function capitalize(name){return name.charAt(0).toUpperCase()+name.slice(1)}function generateQuickGuid(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function iterateKeys(state,f){for(var keys=Object.keys(state),i=0,len=keys.length;i<len;i++){var key=keys[i];if(key.startsWith(FORM_STATE_PREFIX)&&f(key.replace(FORM_STATE_PREFIX,"")))break}}function iterateFieldStates(state,f){iterateKeys(state,function(key){var fieldState=new FieldState(_getFieldState(state,key),key);if(!fieldState.isDeleted())return f(fieldState)})}function anyFieldState(state,f){var result=!1;return iterateFieldStates(state,function(fieldState){if(f(fieldState))return result=!0,!0}),result}function isObject(v){return null!==v&&"object"===(void 0===v?"undefined":_typeof(v))}function coerceToString(v){return exists(v)?!0===v||!1===v?v:Array.isArray(v)?v.map(function(x){return exists(x)?"object"===(void 0===x?"undefined":_typeof(x))?x:x.toString():x}):v.toString():""}function changeHandler(formState,field,e){var context=formState.createUnitOfWork(),fieldState=context.getFieldState(field),value=fieldState.getValue();if(field.handlerBindFunction){if("function"!=typeof field.handlerBindFunction)throw new Error("you specified a handlerBindFunction that is not a function?");value=field.handlerBindFunction(e)}else{if(!exists(e)||!exists(e.target)||!exists(e.target.type))throw new Error("you are using a non-standard html input for field "+field.key+" - please override the framework generated change handler or specify a handlerBindFunction prop. see the documentation for more details.");if(Array.isArray(value))if("checkbox"===e.target.type)e.target.checked?(value=value.slice(0)).some(function(x){return x===e.target.value})||(value.push(e.target.value),value.sort()):value=value.filter(function(x){return x!==e.target.value});else{if("select-multiple"!==e.target.type)throw new Error("only select-multiple and checkbox group supported for array value types. you will need to override the framework event handler or request an enhancement");value=[];for(var options=e.target.options,i=0,len=options.length;i<len;i++)options[i].selected&&value.push(options[i].value)}else if("checkbox"===e.target.type)value=e.target.checked;else{if("select-multiple"===e.target.type)throw new Error("a select-multiple input must have defaultValue={[]} specified");value=e.target.value}}fieldState.setCoercedValue(value).validate(),formState.rootFormState.updateCallback?(context.formState=formState.rootFormState,formState.rootFormState.updateCallback(context,field.key)):context.updateFormState()}function simpleChangeHandler(formState,field,value){var context=formState.createUnitOfWork();context.getFieldState(field).setCoercedValue(value).validate(),formState.rootFormState.updateCallback?(context.formState=formState.rootFormState,formState.rootFormState.updateCallback(context,field.key)):context.updateFormState()}function blurHandler(formState,field){var context=formState.createUnitOfWork();context.getFieldState(field).showMessage(),context.updateFormState()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FormState=exports.FormExtension=exports.FormArray=exports.FormObject=exports.Form=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_react2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("react")),FORM_STATE_PREFIX="formState.",FormObject=(exports.Form=function(_React$Component){function Form(){return _classCallCheck(this,Form),_possibleConstructorReturn(this,(Form.__proto__||Object.getPrototypeOf(Form)).apply(this,arguments))}return _inherits(Form,_react2.default.Component),_createClass(Form,[{key:"render",value:function(){var _props=this.props,formState=_props.formState,model=_props.model,otherProps=_objectWithoutProperties(_props,["formState","model"]);return _react2.default.createElement("form",otherProps,_react2.default.createElement(FormObject,{formState:formState,model:model},this.props.children))}}]),Form}(),exports.FormObject=function(_React$Component2){function FormObject(props){_classCallCheck(this,FormObject);var _this2=_possibleConstructorReturn(this,(FormObject.__proto__||Object.getPrototypeOf(FormObject)).call(this,props));if(_this2.props.nestedForm){var nestedProps=_this2.props.nestedForm.props;_this2.formState=nestedProps.formState,_this2.validationComponent=_this2.props.nestedForm,_this2.labelPrefix=nestedProps.labelPrefix,nestedProps.formExtension&&(_this2.formExtension=!0),exists(_this2.props.nestedForm.state)&&console.log("warning: nested react-formstate components should not manage their own state.")}else _this2.formState=_this2.props.formState,_this2.validationComponent=_this2.props.validationComponent||_this2.formState.form,_this2.labelPrefix=_this2.props.labelPrefix,_this2.formState.injectModelProp(_this2.props.model);return _this2.addProps=_this2.addProps.bind(_this2),_this2}return _inherits(FormObject,_react2.default.Component),_createClass(FormObject,[{key:"render",value:function(){return this.formExtension||this.formState.clearFields(),_react2.default.createElement("div",null,_react2.default.Children.map(this.props.children,this.addProps))}},{key:"addProps",value:function(child){if(!child||!child.props)return child;var props=null,formState=this.formState;if(exists(child.props.formField))props=this.createFieldProps(child.props);else if(exists(child.props.formObject)||exists(child.props.formArray))props=this.createObjectProps(exists(child.props.formObject)?child.props.formObject:child.props.formArray,child.props,exists(child.props.formArray)),this.formState=props.formState;else if(exists(child.props.formExtension))props=this.createExtensionProps(child.props);else{if(child.type===FormObject||child.type===FormArray){if(!exists(child.props.name))throw new Error('a FormObject or FormArray element nested within the same render function should have a "name" property');return props=this.createObjectProps(child.props.name,child.props,child.type===FormArray),_react2.default.cloneElement(child,props,child.props.children)}if(child.type===FormExtension)throw new Error("a FormExtension element should not be nested within a Form, FormObject, or FormArray element in the same render function")}var result=_react2.default.cloneElement(child,props,child.props.children&&_react2.default.Children.map(child.props.children,this.addProps));return this.formState=formState,result}},{key:"createObjectProps",value:function(normalizedName,props,isArray){normalizedName=normalizedName.toString();var formState=this.formState,key=formState.buildKey(normalizedName),field=findField(formState.getRootFields(),key);return field.initialized||(field.initialized=!0,isArray?field.array=[]:field.fields||(field.fields=[]),field.preferNull=Boolean(props.preferNull)),{formState:formState.createFormState(normalizedName),validationComponent:this.validationComponent,labelPrefix:(this.labelPrefix||"")+(props.labelPrefix||"")}}},{key:"createExtensionProps",value:function(props){return{formState:this.formState,labelPrefix:(this.labelPrefix||"")+(props.labelPrefix||"")}}},{key:"createFieldProps",value:function(props){var fieldName=props.formField.toString(),formState=this.formState,key=formState.buildKey(fieldName),field=findField(formState.getRootFields(),key);if(!field.initialized){if(field.initialized=!0,field.label=(this.labelPrefix||"")+(props.label||""),"-"===props.required?field.required=!1:field.required=Boolean(props.required),field.required&&"string"==typeof props.required&&props.required.length>0&&(field.requiredMessage=props.required),props.validate)field.validate=props.validate;else{var f=this.validationComponent["validate"+capitalize(field.name)];f&&(field.validate=f)}if(field.noTrim=Boolean(props.noTrim),field.preferNull=Boolean(props.preferNull),field.intConvert=Boolean(props.intConvert),exists(props.defaultValue)&&(field.defaultValue=props.defaultValue),field.noCoercion=Boolean(props.noCoercion),field.fsValidate=props.fsValidate||props.fsv,!field.fsValidate){var _f=this.validationComponent["fsValidate"+capitalize(field.name)];_f&&(field.fsValidate=_f)}field.validationMessages=props.validationMessages||props.msgs,field.revalidateOnSubmit=Boolean(props.revalidateOnSubmit),"function"==typeof props.noCoercion?field.handlerBindFunction=props.noCoercion:field.handlerBindFunction=props.handlerBindFunction}return{label:field.label,fieldState:formState.getFieldState(field),updateFormState:props.updateFormState||changeHandler.bind(null,formState,field),handleValueChange:props.handleValueChange||simpleChangeHandler.bind(null,formState,field),showValidationMessage:props.showValidationMessage||blurHandler.bind(null,formState,field),formState:this.formState}}}]),FormObject}()),FormArray=exports.FormArray=function(_FormObject){function FormArray(){return _classCallCheck(this,FormArray),_possibleConstructorReturn(this,(FormArray.__proto__||Object.getPrototypeOf(FormArray)).apply(this,arguments))}return _inherits(FormArray,FormObject),FormArray}(),FormExtension=exports.FormExtension=function(_FormObject2){function FormExtension(){return _classCallCheck(this,FormExtension),_possibleConstructorReturn(this,(FormExtension.__proto__||Object.getPrototypeOf(FormExtension)).apply(this,arguments))}return _inherits(FormExtension,FormObject),FormExtension}(),FieldState=function(){function FieldState(_fieldState,key,field,isModified,stateContext){_classCallCheck(this,FieldState),this.fieldState=_fieldState,this.key=key,this.field=field,this.isModified=isModified,this.stateContext=stateContext}return _createClass(FieldState,[{key:"assertCanUpdate",value:function(){if(!this.stateContext)throw new Error("Cannot update a read-only field state");if(this.isDeleted())throw new Error("Cannot update a deleted field state.")}},{key:"getValidity",value:function(){return this.fieldState.validity}},{key:"getAsyncToken",value:function(){return this.fieldState.asyncToken}},{key:"setValueImp",value:function(value,isCoerced){if(this.isModified)throw new Error("setting value on a modified field state? if you are changing the value do that first");return this.setProps(value,Boolean(isCoerced))}},{key:"setProps",value:function(value,isCoerced,validity,message,asyncToken,isMessageVisible){return this.assertCanUpdate(),this.isModified||(this.fieldState={},this.isModified=!0,_setFieldState(this.stateContext.stateUpdates,this.key,this.fieldState)),this.fieldState.value=value,this.fieldState.isCoerced=isCoerced,this.fieldState.validity=validity,this.fieldState.message=message,this.fieldState.asyncToken=asyncToken,this.fieldState.isMessageVisible=isMessageVisible,this}},{key:"callValidationFunction",value:function(f){if("function"==typeof f)return f(this.getValue(),this.stateContext,this.field);throw new Error("validation provided for "+this.getKey()+" is not a function?")}},{key:"callRegisteredValidationFunction",value:function(f,params){return f.apply(void 0,[this.getValue(),this.field.label].concat(_toConsumableArray(params)))}},{key:"equals",value:function(fieldState){if(fieldState.getMessage()!==this.getMessage())return!1;if(fieldState.isMessageVisible()!==this.isMessageVisible())return!1;var a=fieldState.getValue(),b=this.getValue();return Array.isArray(a)?a.length===b.length&&a.every(function(v,i){return v===b[i]}):a===b}},{key:"get",value:function(name){return this.fieldState[name]}},{key:"getKey",value:function(){return this.key}},{key:"getName",value:function(){return this.field&&this.field.name}},{key:"getValue",value:function(){var value=this.fieldState.value;return this.fieldState.isCoerced||this.field&&this.field.noCoercion?value:!exists(value)&&this.field&&Array.isArray(this.field.defaultValue)?[]:coerceToString(value)}},{key:"getUncoercedValue",value:function(){return this.fieldState.value}},{key:"getMessage",value:function(){return this.fieldState.message}},{key:"isCoerced",value:function(){return Boolean(this.fieldState.isCoerced)}},{key:"isValidated",value:function(){return exists(this.fieldState.validity)}},{key:"isValid",value:function(){return 1===this.fieldState.validity}},{key:"isInvalid",value:function(){return 2===this.fieldState.validity}},{key:"isValidating",value:function(){return 3===this.fieldState.validity}},{key:"isUploading",value:function(){return 4===this.fieldState.validity}},{key:"isDeleted",value:function(){return Boolean(this.fieldState.isDeleted)}},{key:"isMessageVisible",value:function(){return Boolean(this.fieldState.isMessageVisible)}},{key:"getField",value:function(){return this.field}},{key:"setValue",value:function(value){return this.setValueImp(value,!1)}},{key:"setCoercedValue",value:function(value){return this.setValueImp(value,!0)}},{key:"validate",value:function(){if(!this.field)return this;this.assertCanUpdate(),this.field.validate&&this.field.fsValidate&&console.log("warning: both validate and fsValidate defined on "+this.field.key+". fsValidate will be used.");var message=void 0;if(this.field.required&&(message=this.callRegisteredValidationFunction(FormState.required,[]))&&this.field.requiredMessage&&(message=this.field.requiredMessage),!message&&this.field.fsValidate){if("function"!=typeof this.field.fsValidate)throw new Error("fsValidate defined on "+this.field.key+" is not a function?");var result=this.field.fsValidate(new FormStateValidation(this.getValue(),this.field.label),this.stateContext,this.field);message="string"==typeof result?result:result&&result._message}else if(!message&&this.field.validate){var f=this.field.validate,msgs=this.field.validationMessages;if("string"==typeof f&&(f=[f]),"string"==typeof msgs&&(msgs=[msgs]),Array.isArray(f))for(var i=0,len=f.length;i<len;i++){var validationName=f[i],params=[];Array.isArray(validationName)&&(params=validationName.slice(1),validationName=validationName[0]);var g=FormState.lookupValidation(validationName);if(!g)throw new Error("no validation function registered as "+validationName);if(message=this.callRegisteredValidationFunction(g,params)){Array.isArray(msgs)&&"string"==typeof msgs[i]&&(message=msgs[i]);break}}else message=this.callValidationFunction(f)}return message?this.setInvalid(message):this.setValid()}},{key:"set",value:function(name,value){return this.isModified||this.setProps(this.getValue(),this.isCoerced(),this.getValidity(),this.getMessage(),this.getAsyncToken(),this.isMessageVisible()),this.fieldState[name]=value,this}},{key:"setValid",value:function(message){return this.setProps(this.getValue(),this.isCoerced(),1,message)}},{key:"setInvalid",value:function(message){return this.setProps(this.getValue(),this.isCoerced(),2,message)}},{key:"setValidating",value:function(message,visible){var asyncToken=generateQuickGuid();return this.setProps(this.getValue(),this.isCoerced(),3,message,asyncToken,!exists(visible)||visible),asyncToken}},{key:"setUploading",value:function(message){return this.setProps(this.getValue(),this.isCoerced(),4,message,null,!0)}},{key:"showMessage",value:function(){exists(this.getMessage())&&!this.isMessageVisible()&&this.setProps(this.getValue(),this.isCoerced(),this.getValidity(),this.getMessage(),this.getAsyncToken(),!0)}}]),FieldState}(),FormState=exports.FormState=function(){function FormState(form){var _this5=this;_classCallCheck(this,FormState),this.form=form,this.path=null,this.rootFormState=this,this.fields=[],this.anyFieldState=function(f){return anyFieldState(_this5.form.state,f)}}return _createClass(FormState,null,[{key:"setRequired",value:function(f){if("function"!=typeof f)throw new Error("registering a required function that is not a function?");this.required=f}},{key:"registerValidation",value:function(name,f){if("function"!=typeof f)throw new Error("registering a validation function that is not a function?");this.validators[name]=f,FormStateValidation.prototype[name]=function(){return this._message?this.canOverrideMessage=!1:(this._message=f.apply(void 0,[this.value,this.label].concat(Array.prototype.slice.call(arguments))),this._message&&(this.canOverrideMessage=!0)),this}}},{key:"unregisterValidation",value:function(name){delete this.validators[name],delete FormStateValidation.prototype[name]}},{key:"lookupValidation",value:function(name){return this.validators[name]}},{key:"createValidator",value:function(value,label){return new FormStateValidation(value,label)}}]),_createClass(FormState,[{key:"createFormState",value:function(name){var formState=new FormState(this.form);return formState.path=this.buildKey(name),formState.rootFormState=this.rootFormState,formState.fields=void 0,formState}},{key:"injectModel",value:function(model){return this.createUnitOfWork().injectModel(model)}},{key:"inject",value:function(state,model){new UnitOfWork(this,state).injectModel(model)}},{key:"add",value:function(state,name,value){new UnitOfWork(this,state).add(name,value)}},{key:"remove",value:function(state,name){new UnitOfWork(this,state).remove(name)}},{key:"isInvalid",value:function(visibleMessagesOnly){return this.anyFieldState(function(fi){return fi.isInvalid()&&(!visibleMessagesOnly||fi.isMessageVisible())})}},{key:"isValidating",value:function(visibleMessagesOnly){return this.anyFieldState(function(fi){return fi.isValidating()&&(!visibleMessagesOnly||fi.isMessageVisible())})}},{key:"isUploading",value:function(){return this.anyFieldState(function(fi){return fi.isUploading()})}},{key:"buildKey",value:function(name){return prefix(this.path,name)}},{key:"getRootFields",value:function(){return this.rootFormState.fields}},{key:"getFieldState",value:function(fieldOrName,asyncToken,stateContext){var field=findFieldByFieldOrName(this,fieldOrName),key=field?field.key:this.buildKey(fieldOrName),_fieldState=_getFieldState(this.form.state,key);return!_fieldState&&this.rootFormState.flatModel&&(_fieldState=_getFieldState(this.rootFormState.flatModel,key)),_fieldState&&!_fieldState.isDeleted||(_fieldState={value:null},field&&void 0!==field.defaultValue&&(_fieldState.value=field.defaultValue)),asyncToken&&_fieldState.asyncToken!==asyncToken?null:new FieldState(_fieldState,key,field,!1,stateContext)}},{key:"get",value:function(name){return this.getFieldState(name).getValue()}},{key:"getu",value:function(name){return this.getFieldState(name).getUncoercedValue()}},{key:"isDeleted",value:function(name){var _fieldState=_getFieldState(this.form.state,this.buildKey(name));return Boolean(_fieldState&&_fieldState.isDeleted)}},{key:"createUnitOfWork",value:function(){return new UnitOfWork(this)}},{key:"clearFields",value:function(){this===this.rootFormState&&(this.fields.length=0)}},{key:"onUpdate",value:function(f){if("function"!=typeof f)throw new Error("adding an update callback that is not a function?");if(this!==this.rootFormState)throw new Error("cannot add an update callback to nested form state");this.updateCallback=f}},{key:"injectModelProp",value:function(model){this===this.rootFormState&&(this.flatModel||(isObject(model)?(isObject(this.form.state)&&Object.keys(this.form.state).some(function(k){return k.startsWith(FORM_STATE_PREFIX)})&&console.log("warning: react-formstate: a model prop was provided to the root FormObject element even though a model was injected in the constructor?"),this.flatModel=this.createUnitOfWork().injectModel(model)):this.flatModel={}))}}]),FormState}();FormState.required=function(value){if("string"!=typeof value||""===value.trim())return"Required field"},FormState.validators={};var UnitOfWork=function(){function UnitOfWork(formState,state){_classCallCheck(this,UnitOfWork),this.formState=formState,this.stateUpdates=state||{}}return _createClass(UnitOfWork,[{key:"recursiveCreateModel",value:function(fields,model){for(var isModelValid=!0,i=0,len=fields.length;i<len;i++){var value=void 0,field=fields[i];if(field.fields||field.array){value=field.fields?{}:[];var formState=this.formState;this.formState=formState.createFormState(field.name),this.recursiveCreateModel(field.fields||field.array,value)||(isModelValid=!1),this.formState=formState}else{var fieldState=this.getFieldState(field);if(fieldState.isValidated()&&!field.revalidateOnSubmit||fieldState.validate(),fieldState.showMessage(),fieldState.isValid()||(isModelValid=!1),!isModelValid)continue;value=fieldState.getValue(),field.intConvert&&(value=Array.isArray(value)?value.map(function(x){return parseInt(x)}):parseInt(value)),"string"==typeof value&&(field.noTrim||(value=value.trim()),field.preferNull&&""===value&&(value=null))}field.preferNull&&(Array.isArray(value)?0===value.length&&(value=null):isObject(value)&&0===Object.keys(value).length&&(value=null)),Array.isArray(model)?model.push(value):model[field.name]=value}return isModelValid}},{key:"getFieldState",value:function(fieldOrName,asyncToken){var field=findFieldByFieldOrName(this.formState,fieldOrName),key=field?field.key:this.formState.buildKey(fieldOrName),_fieldState=_getFieldState(this.stateUpdates,key);return _fieldState?new FieldState(_fieldState,key,field,!0,this):this.formState.getFieldState(field||fieldOrName,asyncToken,this)}},{key:"get",value:function(name){return this.getFieldState(name).getValue()}},{key:"getu",value:function(name){return this.getFieldState(name).getUncoercedValue()}},{key:"set",value:function(name,value){return this.getFieldState(name).setValue(value)}},{key:"setc",value:function(name,value){return this.getFieldState(name).setCoercedValue(value)}},{key:"updateFormState",value:function(additionalUpdates){additionalUpdates?this.formState.form.setState(Object.assign(this.stateUpdates,additionalUpdates)):Object.keys(this.stateUpdates).length>0&&this.formState.form.setState(this.stateUpdates)}},{key:"add",value:function(name,value){if(isObject(value)){var formState=this.formState;this.formState=formState.createFormState(name),this.injectModel(value),this.formState=formState}if(!isObject(value)||Array.isArray(value)){var _fieldState={value:value};_setFieldState(this.stateUpdates,this.formState.buildKey(name),_fieldState)}return this.stateUpdates}},{key:"remove",value:function(name){var _this6=this,key=this.formState.buildKey(name);_setFieldState(this.stateUpdates,key,{isDeleted:!0});var keyDot=key+".";iterateKeys(this.formState.form.state,function(key){key.startsWith(keyDot)&&_setFieldState(_this6.stateUpdates,key,{isDeleted:!0})})}},{key:"injectModel",value:function(model){if("object"!==(void 0===(model=model||{})?"undefined":_typeof(model)))throw new Error("injectModel only accepts object types (including arrays)");if(_setFieldState(this.stateUpdates,this.formState.path||"",{}),Array.isArray(model))for(var i=0,len=model.length;i<len;i++)this.add(i.toString(),model[i]);else for(var names=Object.keys(model),_i=0,_len=names.length;_i<_len;_i++){var name=names[_i];this.add(name,model[name])}return this.stateUpdates}},{key:"createModel",value:function(noUpdate){if(this.formState!==this.formState.rootFormState)throw new Error("createModel should only be called on root form state.");var model={};return this.recursiveCreateModel(this.formState.getRootFields(),model)?model:(noUpdate||this.updateFormState(),null)}}]),UnitOfWork}(),FormStateValidation=function(){function FormStateValidation(value,label){_classCallCheck(this,FormStateValidation),this.value=value,this.label=label,this.canOverrideMessage=!1}return _createClass(FormStateValidation,[{key:"message",value:function(messageOverride){return"string"==typeof messageOverride&&""!==messageOverride.trim()&&this.canOverrideMessage&&(this._message=messageOverride),this.canOverrideMessage=!1,this}},{key:"msg",value:function(messageOverride){return this.message(messageOverride)}}]),FormStateValidation}()},{react:"react"}],"react-bootstrap":[function(require,module,exports){"use strict";module.exports=window.ReactBootstrap},{}],"react-dom":[function(require,module,exports){"use strict";module.exports=window.ReactDOM},{}],react:[function(require,module,exports){"use strict";module.exports=window.React},{}]},{},[4]);